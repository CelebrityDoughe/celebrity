{% extends "base_generic.html" %}
{% load staticfiles range_tag account_tags %}

{% block title %}Celebrity:  {{ celebrity.name }}{% endblock %}

{% block content %}

<!-- begin  celebrity-container-->
<div class="main-container celebrity-container">
    <!-- begin page title main-title-wrapper -->
    <div class="main-title-wrapper">
        <div class="container">
            <h1 class="main-title">Tell us if {{ celebrity.name }} is a nice person or a douchebag</h1>
        </div>
    </div>
    <!-- end page title main-title-wrapper -->
    <!-- begin main-content   -->
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <!-- begin main-content -->
                <div class="main-content">
                    <div class="row">
                        <!-- begin main-content left-bar -->
                        <div class="col-md-8 main-content-inner">
                            <!-- end celebrity wrapper -->
                            <div class="celebrity-wrapper">
                                <div class="celebrity-image">
                                    <img src="{{ celebrity.image1.url }}" alt="" class="img-responsive">
                                </div>
                                <!-- begin celebrity-info -->
                                <div class="celebrity-info">
                                    <h2 class="celebrity-name">{{ celebrity.name }}</h2>
                                    <div class="celebrity-about-box">
                                        <p class="rating-result-words" sub="hover">
                                            {%if celebrity.average_rate >= 4.5 %}
                                                <span>THIS CELEBRITY IS A DOUCHE BAG</span>
                                            {% elif celebrity.average_rate < 4.5 and celebrity.average_rate > 0 %}
                                                <span>THIS CELEBRITY IS A NICE PERSON</span>
                                            {% elif not celebrity.average_rate %}
                                                <span>WE HAVE NO INFORMATION ABOUT THIS PERSON</span>
                                            {% endif %}
                                        </p>
                                        <div class="rating-wrapper">
                                            <div class="status-rated">
                                                {% if celebrity.average_rate >= 4.5 %}
                                                    <img src="{% static 'images/celebritybad.png' %}" />
                                                {% elif celebrity.average_rate < 4.5 and celebrity.average_rate > 0 %}
                                                    <img src="{% static 'images/celebritygood.png' %}" />
                                                {% elif not celebrity.average_rate %}
                                                    <img src="{% static 'images/notyetrated.png' %}" />
                                                {%endif%}
                                            </div>
                                            <span class="rate-number"> {% if celebrity.average_rate %}{{ celebrity.average_rate|floatformat:1 }}{% else %}0.0{% endif %}</span>
                                            <div class="your-rating">
                                                {% if my_rating %}
                                                <div>Your Rating:</div>
                                                <div class="rating readonly" data-score="{{ my_rating.rate }}"></div><br />
                                                {% endif %}
                                                <div class="rating-count">
                                                    Ratings Count: <span>{{ celebrity.rate_count }}</span>
                                                </div>
                                                {% if not my_rating %}
                                                <div id="rate" class="rating"></div>
                                                <p>Please mark your rating here</p>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <p class="about-person-text">{{ celebrity.description }}</p>
                                    </div>
                                    {% if my_rating %}
                                    <p><b>You already rated this celebrity</b></p>
                                    <div class="celebrity-block-right">
                                        <p>{{ my_rating.review }}</p>
                                    </div>
                                    {% else %}
                                    <div class="comments-wrapper">
                                        <p class="comment-message"><span>must add a comment before submitting</span></p>
                                        <div class="user-umage">
                                            <img src="{{ user.get_profile.get_mugshot_url }}" alt="" class="img-responsive">
                                        </div>
                                        <form action="." method="post" class="add-comment-form">
                                            {% csrf_token %}
                                            <input type="hidden" name="rate" id="rate_score" />
                                            <p class="rate-error-message">Please add a comment before submitting your rating.</p>
                                            <div class="form-group">
                                                <textarea name="review" id="review_text" cols="30" rows="10" class="form-control" placeholder="Add a Comment"></textarea>
                                                <p class="form-error-message">Please add your review</p>
                                                <button class="btn btn-main">Rate</button>
                                            </div>
                                        </form>
                                    </div>
                                    {% endif %}
                                </div>
                                <!-- end celebriti info -->
                                <div class="social-sharing-wrapper">
                                    <!-- Go to www.addthis.com/dashboard to generate a new set of sharing buttons -->
                                    <a href="https://api.addthis.com/oexchange/0.8/forward/facebook/offer?url=http%3A%2F%2Fwww.celebritydouchebag.com%2Fcelebrity%2FZooey_Deschanel%2F&pubid=ra-51c598472bfb1d5b&ct=1&title=AddThis%20-%20Get%20likes%2C%20get%20shares%2C%20get%20followers&pco=tbxnj-1.0" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/facebook.png" border="0" alt="Facebook"/></a><a href="https://api.addthis.com/oexchange/0.8/forward/twitter/offer?url=http%3A%2F%2Fwww.celebritydouchebag.com%2Fcelebrity%2FZooey_Deschanel%2F&pubid=ra-51c598472bfb1d5b&ct=1&title=AddThis%20-%20Get%20likes%2C%20get%20shares%2C%20get%20followers&pco=tbxnj-1.0" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/twitter.png" border="0" alt="Twitter"/></a><a href="https://api.addthis.com/oexchange/0.8/forward/vk/offer?url=http%3A%2F%2Fwww.celebritydouchebag.com%2Fcelebrity%2FZooey_Deschanel%2F&pubid=ra-51c598472bfb1d5b&ct=1&title=AddThis%20-%20Get%20likes%2C%20get%20shares%2C%20get%20followers&pco=tbxnj-1.0" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/vk.png" border="0" alt="VKontakte"/></a><a href="https://www.addthis.com/bookmark.php?source=tbx32nj-1.0&v=300&url=http%3A%2F%2Fwww.celebritydouchebag.com%2Fcelebrity%2FZooey_Deschanel%2F&pubid=ra-51c598472bfb1d5b&ct=1&title=AddThis%20-%20Get%20likes%2C%20get%20shares%2C%20get%20followers&pco=tbxnj-1.0" target="_blank"><img src="https://cache.addthiscdn.com/icons/v2/thumbs/32x32/addthis.png" border="0" alt="Addthis"/></a>

                                </div>
                            </div>
                            <!-- end celebrity wrapper -->
                            <div class="comments-list">
                                <h3>All Comments</h3>
                                <!-- HTML for Comments -->
                                {% for rating in celebrity.rates.all %}
                                <div class="row">
                                    <div class="col-md-2 col-sm-2 hidden-xs">
                                        <div class="thumbnail">
                                            <img class="comment_thumb " src="{{ rating.user.get_profile.get_mugshot_url }}">
                                            <div class="media_block_content">
                                                <div class="bold">
                                                    <p>{{ rating.user.get_full_name|default_if_empty:user.username }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="quote_contents media_block">
                                        <div sub="hover" tip="Original Score: 2/4" class="media_block_image icon small rotten"></div>
                                        <div class="media_block_content">
                                            <div class="rating readonly" data-score="{{ rating.rate }}"></div>
                                            <p>{{ rating.review }}</p>
                                            <div class="small">
                                                <span class="fr subtle">{{ rating.dt_updated }}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                                <!--End HTML for Comments-->
                            </div>
                        </div>
                        <!-- end main-content left-bar -->

                        {% include "right-sidebar.html" %}
                    </div>
                </div>
                <!-- end main-content -->
            </div>
        </div>
    </div>
    <!-- end main-content -->
</div>
<!-- end actors-container celebrity-container -->
{% endblock %}

{% block extra_scripts %}
<script type="text/javascript" src="{% static 'raty/jquery.raty.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/rate.js' %}"></script>
{% endblock %}
